import logging
import random
from telegram import Update
from telegram.ext import Application, CommandHandler, MessageHandler, filters, ContextTypes


TOKEN = "7870727549:AAGgh6sTxJk_X_lfKiY5fky6hIO4BtpY0X8"

# Списки слов
english_words = ["as",  "I",  "his",  "that",  "he",  "was",  "for",  "on",  "are",  "with",  "they",  "be",  "at",  "one",  "have",  "this",  "from",  "by",  "hot",  "word",  "but",  "what",  "some",  "is",  "it",  "you",  "or",  "had",  "of",  "to",  "and",  "in",  "we",  "can",  "out",  "other",  "were",  "which",  "do",  "their",  "time",  "if",  "will",  "how",  "said",  "each",  "tell",  "does",  "set",  "three",  "want",  "air",  "well",  "also",  "play",  "small",  "end",  "put",  "home",  "read",  "hand",  "port",  "large",  "spell",  "add",  "even",  "land",  "here",  "must",  "big",  "high",  "such",  "follow",  "act",  "why",  "ask",  "men",  "change",  "went",  "light",  "kind",  "off",  "need",  "house",  "picture",  "try",  "us",  "again",  "animal",  "point",  "mother",  "world",  "near",  "build",  "self",  "earth",  "father",  "any",  "new",  "work",  "part",  "take",  "get",  "place",  "made",  "live",  "where",  "after",  "back",  "little",  "only",  "round",  "man",  "year",  "came",  "show",  "every",  "good",  "me",  "give",  "our",  "under",  "name",  "very",  "through",  "just",  "form",  "sentence",  "great",  "think",  "say",  "help",  "low",  "line",  "differ",  "turn",  "cause",  "much",  "mean",  "before",  "move",  "right",  "boy",  "old",  "too",  "same",  "she",  "all",  "there",  "when",  "up",  "use",  "your",  "way",  "about",  "many",  "then",  "them",  "write",  "would",  "like",  "so",  "these",  "her",  "long",  "make",  "thing",  "see",  "him",  "two",  "has",  "look",  "more",  "day",  "could",  "go",  "come",  "did",  "number",  "sound",  "no",  "most",  "people",  "my",  "over",  "know",  "water",  "than",  "call",  "first",  "who",  "may",  "down",  "side",  "been",  "now",  "find",  "head",  "stand",  "own",  "page",  "should",  "country",  "found",  "answer",  "school",  "grow",  "study",  "still",  "learn",  "plant",  "cover",  "food",  "sun",  "four",  "between",  "state",  "keep",  "eye",  "never",  "last",  "let",  "thought",  "city",  "tree",  "cross",  "farm",  "hard",  "start",  "might",  "story",  "saw",  "far",  "sea",  "draw",  "left",  "late",  "run",  "don’t",  "while",  "press",  "close",  "night",  "real",  "life",  "few",  "north",  "book",  "carry",  "took",  "science",  "eat",  "room",  "friend",  "began",  "idea",  "fish",  "mountain",  "stop",  "once",  "base",  "hear",  "horse",  "cut",  "sure",  "watch",  "colour",  "face",  "wood",  "main",  "open",  "seem",  "together",  "next",  "white",  "children",  "begin",  "got",  "walk",  "example",  "ease",  "paper",  "group",  "always",  "music",  "those",  "both",  "mark",  "often",  "letter",  "until",  "mile",  "river",  "car",  "feet",  "care",  "second",  "enough",  "plain",  "girl",  "usual",  "young",  "ready",  "above",  "ever",  "red",  "list",  "though",  "feel",  "talk",  "bird",  "soon",  "body",  "dog",  "family",  "direct",  "pose",  "leave",  "song",  "measure",  "door",  "product",  "black",  "short",  "numeral",  "class",  "wind",  "question",  "happen",  "complete",  "ship",  "area",  "half",  "rock",  "order",  "fire",  "south",  "problem",  "piece",  "told",  "knew",  "pass",  "since",  "top",  "whole",  "king",  "street",  "inch",  "multiply",  "nothing",  "course",  "stay",  "wheel",  "full",  "force",  "blue",  "object",  "decide",  "surface",  "deep",  "moon",  "island",  "foot",  "system",  "busy",  "test",  "record",  "boat",  "common",  "gold",  "possible",  "plane",  "stead",  "dry",  "wonder",  "laugh",  "thousand",  "ago",  "ran",  "check",  "game",  "shape",  "equate",  "OK",  "miss",  "brought",  "heat",  "snow",  "tire",  "bring",  "yes",  "distant",  "fill",  "east",  "paint",  "language",  "among",  "unit",  "power",  "town",  "fine",  "certain",  "fly",  "fall",  "lead",  "cry",  "dark",  "machine",  "note",  "wait",  "plan",  "figure",  "star",  "box",  "noun",  "field",  "rest",  "correct",  "able",  "pound",  "done",  "beauty",  "drive",  "stood",  "contain",  "front",  "teach",  "week",  "final",  "gave",  "green",  "oh",  "quick",  "develop",  "ocean",  "warm",  "free",  "minute",  "strong",  "special",  "mind",  "behind",  "clear",  "tail",  "produce",  "fact",  "space",  "heard",  "best",  "hour",  "better",  "true",  "during",  "hundred",  "five",  "remember",  "step",  "early",  "hold",  "west",  "ground",  "interest",  "reach",  "fast",  "verb",  "sing",  "listen",  "six",  "table",  "travel",  "less",  "morning",  "ten",  "simple",  "several",  "vowel",  "towards",  "war",  "lay",  "against",  "pattern",  "slow",  "center",  "love",  "person",  "money",  "serve",  "appear",  "road",  "map",  "rain",  "rule",  "govern",  "pull",  "cold",  "notice",  "voice",  "energy",  "hunt",  "probable",  "bed",  "brother",  "egg",  "ride",  "cell",  "believe",  "perhaps",  "pick",  "sudden",  "count",  "square",  "reason",  "length",  "represent",  "art",  "subject",  "region",  "size",  "vary",  "settle",  "speak",  "weight",  "general",  "ice",  "matter",  "circle",  "pair",  "include",  "divide",  "syllable",  "felt",  "grand",  "ball",  "yet",  "wave",  "drop",  "heart",  "AM",  "present",  "heavy",  "dance",  "engine",  "position",  "arm",  "wide",  "sail",  "material",  "fraction",  "forest",  "sit",  "race",  "window",  "store",  "summer",  "train",  "sleep",  "prove",  "alone",  "leg",  "exercise",  "wall",  "catch",  "mount",  "wish",  "sky",  "board",  "joy",  "winter",  "somebody",  "written",  "wild",  "instrument",  "kept",  "glass",  "grass",  "cow",  "job",  "edge",  "sign",  "visit",  "past",  "soft",  "fun",  "bright",  "gas",  "weather",  "month",  "million",  "bear",  "finish",  "happy",  "hope",  "flower",  "clothes",  "strange",  "gone",  "trade",  "melody",  "trip",  "office",  "receive",  "row",  "mouth",  "exact",  "symbol",  "die",  "least",  "trouble",  "shout",  "except",  "writer",  "seed",  "tone",  "join",  "suggest",  "clean",  "break",  "lady",  "yard",  "rise",  "bad",  "blow",  "oil",  "blood",  "touch",  "goal",  "cent",  "mix",  "team",  "wire",  "cost",  "lost",  "brown",  "wear",  "garden",  "equal",  "sent",  "choose",  "feel",  "fit",  "flow",  "fair",  "bank",  "collect",  "save",  "control",  "decimal",  "ear",  "else",  "quite",  "broke",  "case",  "middle",  "kill",  "son",  "lake",  "moment",  "scale",  "loud",  "spring",  "observe",  "child",  "straight",  "consonant",  "nation",  "dictionary",  "milk",  "speed",  "method",  "organ",  "pay",  "age",  "section",  "dress",  "cloud",  "surprise",  "quiet",  "stone",  "tiny",  "climb",  "cool",  "design",  "poor",  "lot",  "explain",  "bottom",  "key",  "iron",  "single",  "stick",  "flat",  "twenty",  "skin",  "smile",  "crease",  "hole",  "jump",  "baby",  "eight",  "village",  "meet",  "root",  "buy",  "raise",  "solve",  "metal",  "whether",  "push",  "seven",  "paragraph",  "third",  "shall",  "held",  "hair",  "describe",  "cook",  "floor",  "either",  "result",  "burn",  "hill",  "safe",  "cat",  "century",  "consider",  "type",  "law",  "bit",  "coast",  "copy",  "phrase",  "silent",  "tall",  "sand",  "soil",  "roll",  "temperature",  "finger",  "industry",  "value",  "fight",  "lie",  "beat",  "excite",  "natural",  "view",  "sense",  "capital",  "won’t",  "chair",  "danger",  "fruit",  "rich",  "thick",  "soldier",  "process",  "operate",  "practice",  "separate",  "difficult",  "doctor",  "please",  "protect",  "noon",  "crop",  "modern",  "element",  "hit",  "student",  "corner",  "party",  "supply",  "whose",  "locate",  "ring",  "character",  "insect",  "caught",  "period",  "indicate",  "radio",  "spoke",  "atom",  "human",  "history",  "effect",  "electric",  "expect",  "bone",  "rail",  "imagine",  "provide",  "agree",  "thus",  "gentle",  "woman",  "captain",  "guess",  "necessary",  "sharp",  "wing",  "create",  "neighbour",  "wash",  "bat",  "rather",  "crowd",  "corn",  "compare",  "poem",  "string",  "bell",  "depend",  "meat",  "rub",  "tube",  "famous",  "dollar",  "stream",  "fear",  "sight",  "thin",  "triangle",  "planet",  "hurry",  "chief",  "colony",  "clock",  "mine",  "tie",  "enter",  "major",  "fresh",  "search",  "send",  "yellow",  "gun",  "allow",  "print",  "dead",  "spot",  "desert",  "suit",  "current",  "lift",  "rose",  "arrive",  "master",  "track",  "parent",  "shore",  "division",  "sheet",  "substance",  "favour",  "connect",  "post",  "spend",  "chord",  "fat",  "glad",  "original",  "share",  "station",  "dad",  "bread",  "charge",  "proper",  "bar",  "offer",  "segment",  "slave",  "duck",  "instant",  "market",  "degree",  "populate",  "education",  "dear",  "enemy",  "reply",  "drink",  "occur",  "support",  "speech",  "nature",  "range",  "steam",  "motion",  "path",  "liquid",  "violence",  "meant",  "quotient",  "teeth",  "shell",  "neck",  "oxygen",  "sugar",  "death",  "pretty",  "skill",  "women",  "season",  "solution",  "magnet",  "silver",  "thanks",  "lunch",  "match",  "treat",  "especially",  "fail",  "afraid",  "huge",  "sister",  "steel",  "discuss",  "forward",  "similar",  "guide",  "experience",  "score",  "apple",  "evidence",  "message",  "movie",  "coat",  "mass",  "card",  "band",  "rope",  "slip",  "win",  "dream",  "evening",  "condition",  "feed",  "tool",  "total",  "basic",  "smell",  "valley",  "not",  "double",  "seat",  "continue",  "news",  "police",  "hat",  "sell",  "success",  "company",  "security",  "event",  "particular",  "deal",  "swim",  "term",  "opposite",  "wife",  "shoes",  "shoulders",  "spread",  "arrange",  "camp",  "invent",  "cotton",  "born",  "determine",  "quarter",  "nine",  "remove",  "noise",  "level",  "chance",  "gather",  "shop",  "stretch",  "throw",  "shine",  "property",  "issue",  "legal",  "select",  "wrong",  "gray",  "repeat",  "require",  "broad",  "prepare",  "salt",  "nose",  "plural",  "anger",  "claim",  "price" ]


russian_words = ["как",  "я",  "его",  "тот",  "он",  "был",  "для",  "на",  "являются",  "с",  "они",  "быть",  "на",  "один",  "иметь",  "это",  "из",  "от",  "горячий",  "слово",  "но",  "что",  "некоторый",  "является",  "это",  "ты",  "или",  "имел",  "из",  "в",  "и",  "в",  "мы",  "может",  "из",  "другой",  "были",  "который",  "делать",  "их",  "время",  "если",  "будет",  "как",  "говорить",  "каждый",  "говорить",  "делает",  "задавать",  "три",  "хотеть",  "воздух",  "хорошо",  "также",  "играть",  "маленький",  "конец",  "ставить",  "дом",  "читать",  "рука",  "порт",  "большой",  "читать по буквам",  "добавлять",  "даже",  "земля",  "здесь",  "должен",  "большой",  "высокий",  "такой",  "следовать",  "действовать",  "почему",  "спрашивать",  "люди",  "менять",  "отправился",  "свет",  "добрый",  "от",  "необходимость",  "дом",  "картина",  "пробовать",  "нас",  "снова",  "животное",  "точка",  "мать",  "мир",  "близко",  "строить",  "себя",  "земля",  "отец",  "любой",  "новый",  "работа",  "часть",  "брать",  "получать",  "место",  "сделать",  "жить",  "где",  "после",  "назад",  "немного",  "только",  "круглый",  "мужчина",  "год",  "пришел",  "показывать",  "каждый",  "хороший",  "мне",  "давать",  "наш",  "под",  "имя",  "очень",  "через",  "только",  "вид",  "предложение",  "отличный",  "думать",  "говорить",  "помогать",  "низкий",  "линия",  "отличаться",  "поворачивать",  "причина",  "много",  "значить",  "до",  "двигать",  "право",  "мальчик",  "старый",  "тоже",  "также",  "она",  "все",  "там",  "когда",  "вверх",  "использовать",  "твой",  "путь",  "о",  "много",  "затем",  "их",  "писать",  "бы",  "нравиться",  "так",  "эти",  "ее",  "долго",  "делать",  "вещь",  "видеть",  "его",  "два",  "имеет",  "смотреть",  "больше",  "день",  "мог",  "идти",  "приходить",  "сделал",  "номер",  "звук",  "нет",  "самый",  "люди",  "мой",  "над",  "знать",  "вода",  "чем",  "звонить",  "первый",  "кто",  "может",  "вниз",  "сторона",  "был",  "сейчас",  "найти",  "голова",  "стоять",  "свой",  "страница",  "должен",  "страна",  "найденный",  "ответ",  "школа",  "расти",  "изучать",  "все еще",  "учиться",  "растение",  "накрывать",  "еда",  "солнце",  "четыре",  "между",  "состояние",  "держать",  "глаз",  "никогда",  "последний",  "позволять",  "мысль",  "город",  "дерево",  "пересекать",  "ферма",  "тяжелый",  "начинать",  "может быть",  "история",  "увидел",  "далеко",  "море",  "рисовать",  "лево",  "поздно",  "бежать",  "не",  "в то время",  "нажимать",  "близко",  "ночь",  "реальный",  "жизнь",  "несколько",  "север",  "книга",  "нести",  "взял",  "наука",  "есть",  "комната",  "друг",  "началось",  "идея",  "рыба",  "гора",  "остановка",  "однажды",  "базовый",  "слышать",  "лошадь",  "резать",  "конечно",  "смотреть",  "цвет",  "лицо",  "дерево",  "главный",  "открыть",  "казаться",  "вместе",  "следующий",  "белый",  "дети",  "начинать",  "получил",  "гулять",  "пример",  "легкость",  "бумага",  "группа",  "всегда",  "музыка",  "те",  "оба",  "отметка",  "часто",  "письмо",  "до тех пор",  "миля",  "река",  "машина",  "ноги",  "заботиться",  "секунда",  "достаточно",  "простой",  "девочка",  "обычно",  "молодой",  "готовый",  "выше",  "когда-либо",  "красный",  "список",  "хоть",  "чувствовать",  "говорить",  "птица",  "скоро",  "тело",  "собака",  "семья",  "непосредственный",  "поза",  "покидать",  "песня",  "мера",  "дверь",  "продукт",  "черный",  "короткий",  "числительное",  "класс",  "ветер",  "вопрос",  "случаться",  "полный",  "корабль",  "площадь",  "половина",  "рок",  "заказ",  "огонь",  "юг",  "проблема",  "часть",  "говорил",  "знал",  "проходить",  "с",  "верх",  "весь",  "король",  "улица",  "дюйм",  "умножать",  "ничего",  "курс",  "оставаться",  "колесо",  "полный",  "сила",  "голубой",  "объект",  "решать",  "поверхность",  "глубоко",  "луна",  "остров",  "нога",  "система",  "занят",  "тест",  "записывать",  "лодка",  "общий",  "золото",  "возможный",  "самолет",  "место",  "сухой",  "чудо",  "смех",  "тысяча",  "тому назад",  "побежал",  "проверять",  "игра",  "форма",  "приравнивать",  "хорошо",  "скучать",  "привел",  "жара",  "снег",  "шина",  "приносить",  "да",  "отдаленный",  "наполнять",  "восток",  "краска",  "язык",  "среди",  "единица",  "мощность",  "город",  "отлично",  "определенный",  "летать",  "падать",  "вести",  "плакать",  "темный",  "машина",  "примечание",  "ждать",  "план",  "цифра",  "звезда",  "коробка",  "существительное",  "поле",  "остальное",  "поправлять",  "в состоянии",  "фунт",  "сделанный",  "красота",  "водить",  "стоял",  "содержать",  "перед",  "обучать",  "неделя",  "финал",  "дал",  "зеленый",  "ох",  "быстро",  "развивать",  "океан",  "тепло",  "свободный",  "минута",  "сильный",  "особый",  "разум",  "позади",  "ясный",  "хвост",  "производить",  "факт",  "пространство",  "слышал",  "лучший",  "час",  "лучше",  "правда",  "в течение",  "сотня",  "пять",  "помнить",  "шаг",  "ранний",  "держать",  "запад",  "земля",  "интерес",  "достигать",  "быстро",  "глагол",  "петь",  "слушать",  "шесть",  "стол",  "путешествовать",  "меньше",  "утро",  "десять",  "просто",  "несколько",  "гласный",  "к",  "война",  "лежать",  "против",  "узор",  "медленно",  "центр",  "любовь",  "человек",  "деньги",  "обслуживать",  "появляться",  "дорога",  "карта",  "дождь",  "правило",  "управлять",  "тянуть",  "холодный",  "уведомление",  "голос",  "энергия",  "охотититься",  "вероятный",  "кровать",  "брат",  "яйцо",  "ездить",  "клетка",  "верить",  "возможно",  "выбирать",  "внезапный",  "считать",  "квадрат",  "причина",  "длина",  "представлять",  "искусство",  "предмет",  "регион",  "размер",  "меняться",  "селиться",  "говорить",  "вес",  "главный",  "лед",  "иметь значение",  "круг",  "пара",  "включать в себя",  "разделять",  "слог",  "чувствовал",  "большой",  "мяч",  "еще",  "волна",  "капля",  "сердце",  "до полудня",  "подарок",  "тяжелый",  "танец",  "двигатель",  "позиция",  "рука",  "широкий",  "паруса",  "материал",  "доля",  "лес",  "сидеть",  "гонка",  "окно",  "магазин",  "лето",  "поезд",  "спать",  "доказывать",  "один",  "нога",  "упражнение",  "стена",  "поймать",  "взбираться",  "желать",  "небо",  "доска",  "радость",  "зима",  "кто-то",  "написанный",  "дикий",  "инструмент",  "сохранил",  "стекло",  "трава",  "корова",  "работа",  "край",  "подписывать",  "посещать",  "прошлое",  "мягкий",  "веселый",  "яркий",  "газ",  "погода",  "месяц",  "миллион",  "медведь",  "закончить",  "счастливый",  "надежда",  "цветок",  "одежда",  "странный",  "ушедший",  "торговля",  "мелодия",  "поездка",  "офис",  "получать",  "ряд",  "рот",  "точный",  "символ",  "умирать",  "наименее",  "проблема",  "кричать",  "кроме",  "писатель",  "семя",  "тон",  "присоединяться",  "предлагать",  "чисто",  "перерыв",  "леди",  "двор",  "рост",  "плохой",  "удар",  "масло",  "кровь",  "трогать",  "цель",  "цент",  "смесь",  "команда",  "проволока",  "стоимость",  "потерял",  "коричневый",  "носить",  "сад",  "равный",  "отправил",  "выбирать",  "чувствовать",  "соответствовать",  "поток",  "ярмарка",  "банк",  "собирать",  "сохранять",  "контроль",  "десятичный",  "ухо",  "еще",  "довольно",  "сломал",  "случай",  "средний",  "убивать",  "сын",  "озеро",  "момент",  "шкала",  "громко",  "весна",  "наблюдать",  "ребенок",  "прямо",  "согласный",  "нация",  "словарь",  "молоко",  "скорость",  "метод",  "орган",  "платить",  "возраст",  "раздел",  "платье",  "облако",  "сюрприз",  "тихо",  "камень",  "крошечный",  "подъем",  "крутой",  "дизайн",  "бедный",  "много",  "объяснять",  "низ",  "ключ",  "железо",  "один",  "придерживаться",  "квартира",  "двадцать",  "кожа",  "улыбка",  "складка",  "дыра",  "прыгать",  "ребенок",  "восемь",  "деревня",  "встречать",  "корень",  "покупать",  "поднимать",  "решать",  "металл",  "будь то",  "давить",  "семь",  "параграф",  "третий",  "должен",  "держал",  "волосы",  "описывать",  "готовить",  "пол",  "или",  "результат",  "гореть",  "холм",  "безопасный",  "кот",  "век",  "рассматривать",  "тип",  "закон",  "немного",  "берег",  "копировать",  "фраза",  "тихий",  "высокий",  "песок",  "почва",  "вертеть",  "температура",  "палец",  "индустрия",  "значение",  "драка",  "ложь",  "бить",  "возбуждать",  "натуральный",  "вид",  "смысл",  "столица",  "не будет",  "стул",  "опасность",  "фрукт",  "богатый",  "толстый",  "солдат",  "процесс",  "управлять",  "практиковать",  "разделять",  "сложный",  "доктор",  "пожалуйста",  "защищать",  "полдень",  "обрезать",  "современный",  "элемент",  "удар",  "студент",  "угол",  "вечеринка",  "поставка",  "чьи",  "размещать",  "кольцо",  "персонаж",  "насекомое",  "поймал",  "период",  "указывать",  "радио",  "говорил",  "атом",  "человек",  "история",  "эффект",  "электрический",  "ожидать",  "кость",  "рельс",  "представлять",  "предоставлять",  "соглашаться",  "таким образом",  "нежный",  "женщина",  "капитан",  "предположение",  "необходимый",  "острый",  "крыло",  "создавать",  "сосед",  "мыть",  "летучая мышь",  "скорее",  "толпа",  "кукуруза",  "сравнивать",  "стих",  "струна",  "колокол",  "зависеть",  "мясо",  "тереть",  "трубка",  "известный",  "доллар",  "поток",  "страх",  "взгляд",  "тонкий",  "треугольник",  "планета",  "торопиться",  "шеф",  "колония",  "часы",  "мой",  "галстук",  "вход",  "майор",  "свежий",  "поиск",  "посылать",  "желтый",  "пистолет",  "позволять",  "печать",  "мертвый",  "место",  "пустыня",  "костюм",  "текущий",  "поднимать",  "роза",  "прибывать",  "мастер",  "трек",  "родитель",  "побережье",  "деление",  "лист",  "вещество",  "одолжение",  "соединять",  "почта",  "тратить",  "аккорд",  "жир",  "рад",  "оригинальный",  "делиться",  "станция",  "папа",  "хлеб",  "заряд",  "правильный",  "бар",  "предлагать",  "часть",  "раб",  "утка",  "мгновенный",  "рынок",  "температура",  "населять",  "образование",  "дорогая",  "враг",  "ответ",  "напиток",  "происходить",  "поддержка",  "речь",  "природа",  "диапазон",  "пар",  "движение",  "путь",  "жидкость",  "жестокость",  "значил",  "частное",  "зубы",  "ракушка",  "шея",  "кислород",  "сахар",  "смерть",  "красивый",  "умение",  "женщины",  "сезон",  "решение",  "магнит",  "серебро",  "спасибо",  "ужин",  "совпадать",  "угощение",  "особенно",  "провал",  "испуганный",  "огромный",  "сестра",  "сталь",  "обсуждать",  "вперед",  "похожий",  "руководство",  "опыт",  "очки",  "яблоко",  "доказательства",  "сообщение",  "фильм",  "пальто",  "масса",  "карта",  "группа",  "веревка",  "скользить",  "побеждать",  "мечта",  "вечер",  "состояние",  "кормить",  "инструмент",  "сумма",  "базовый",  "запах",  "долина",  "не",  "двойной",  "место",  "продолжать",  "новости",  "полиция",  "шляпа",  "продавать",  "успех",  "компания",  "безопасность",  "событие",  "особенный",  "сделка",  "плавать",  "срок",  "напротив",  "жена",  "обувь",  "плечи",  "распространение",  "организовывать",  "лагерь",  "изобретать",  "хлопок",  "родиться",  "определять",  "четверть",  "девять",  "удалять",  "шум",  "уровень",  "шанс",  "собирать",  "магазин",  "растягивать",  "бросать",  "сиять",  "собственность",  "проблема",  "законный",  "выбирать",  "неправильный",  "серый",  "повторять",  "требоваться",  "широкий",  "подготавливать",  "соль",  "нос",  "множественное число",  "гнев",  "запрос",  "цена"]

cards = list(zip(english_words, russian_words))

user_progress = {}

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    welcome_text = (
        "Привет! Я бот для изучения английского языка. 🧠\n"
        "Я буду показывать вам английские слова, а вы попробуйте их перевести.\n"
        "Чтобы начать тренировку, напишите /train.\n"
        "Чтобы закончить, напишите /stop."
        "Чтобы очистить чат напишете /clear"
    )
    await update.message.reply_text(welcome_text)


async def train(update: Update, context: ContextTypes.DEFAULT_TYPE):
    
    user_id = update.message.from_user.id
    
    random.shuffle(cards)

    user_progress[user_id] = {"index": 0, "words": cards}

    await update.message.reply_text("Начинаем тренировку! Переведите слово: ")
    await ask_next_word(update, context)


async def ask_next_word(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    progress = user_progress.get(user_id)

    if progress and progress["index"] < len(progress["words"]):
        eng_word, _ = progress["words"][progress["index"]]
        await update.message.reply_text(f"Переведите слово: '{eng_word}'")
    else:
        await update.message.reply_text("Тренировка завершена! 🎉\nНапишите /train, чтобы начать заново.")


async def check_answer(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    user_input = update.message.text.lower().strip()

    if user_id in user_progress:
        index = user_progress[user_id]["index"]
        words = user_progress[user_id]["words"]

        if index < len(words):
            eng_word, correct_rus = words[index]

            if user_input == correct_rus:
                await update.message.reply_text("✅ Правильно!")
            else:
                await update.message.reply_text(f"❌ Неправильно! Правильный ответ: '{correct_rus}'")

            # Переход к следующему слову
            user_progress[user_id]["index"] += 1
            await ask_next_word(update, context)


async def stop(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_id = update.message.from_user.id
    if user_id in user_progress:
        del user_progress[user_id]
    await update.message.reply_text("Тренировка завершена. Напишите /train, чтобы начать заново.")

async def clear_chat(update: Update, context: ContextTypes.DEFAULT_TYPE):
    chat_id = update.message.chat_id
    message_id = update.message.message_id

    for msg_id in range(message_id, message_id - 50, -1):  # Удаляем последние 50 сообщений
        try:
            await context.bot.delete_message(chat_id, msg_id)
        except:
            pass 


def main():
    app = Application.builder().token(TOKEN).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(CommandHandler("train", train))
    app.add_handler(CommandHandler("stop", stop))
    app.add_handler(CommandHandler("clear", clear_chat))

    # Обрабатываем все текстовые сообщения (ответы на слова)
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, check_answer))

    print("Бот запущен...")
    app.run_polling()


if __name__ == "__main__":
    main()
    
